<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
    crossorigin="anonymous">

  <title>BudBuddy Quiz</title>
</head>

<body>
  <div class="container">
    <div class="panel" id="questions"></div>
  </div>
  <!-- insert submit button -->
  <button class="submit">Submit</button>
  <!-- // insert modal 1-->
  <div class="modal fade" id="modalIndica" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">We recommend the Indica strain</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Sit back, relax, and inhale the mellow body high of the Indica family. Great for people with physical pain or loss of appetite,
          Indicas will transform your body into a calm, lazy member of the Couch Potato Club.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- // insert modal 2 -->
  <div class="modal fade" id="modalSativa" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">We recommend the Sativa strain</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          For those with depression or anxiety, the Sativa strain will provoide a bubbly, giddy good time. Similar to an alcohol buzz,
          the Sativa high helps you overcome social anxiety by creating a happy high focused above the neck.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- // insert modal 3 -->
  <div class="modal fade" id="modalHybrid" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">We recommend the hybrid strain</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Popular among heavy stoners and newbies alike, hybrid strains allow you to enjoy the best of both Indica and Sativa highs
          without the extremes. Because of the wide variety of hybrid varieties, it is easy to "customize" your cannabis
          experience.
          <html>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
    crossorigin="anonymous"></script>

  <script>
    var questions = [
      {
        question: "On a typical Saturday night, you are...",
        answerList: [
          { strain: "indica", value: "Chilling on the couch in front of the TV" },
          { strain: "sativa", value: "Dancing like a maniac" },
          { strain: "hybrid", value: "Having dinner with friends" },
        ]
      }, {
        question: "Which of the following sounds like a dream vacation to you?",
        answerList: [
          { strain: "indica", value: "Hours of lounging in the sun. Then a nap." },
          { strain: "sativa", value: "21 countries in 21 days" },
          { strain: "hybrid", value: "Equal parts relaxation and adventure." },
        ]
      }, {
        question: "What type of animal do you most relate to?",
        answerList: [
          { strain: "indica", value: "Housecat. Nothing but naps and belly rubs? Yes please!" },
          { strain: "sativa", value: "Hummingbird. I'm always flying somewhere." },
          { strain: "hybrid", value: "Labrador retriever. I like a good cuddle after hours of playing in the yard." },
        ]
      }, {
        question: "Which color is your favorite?",
        answerList: [
          { strain: "indica", value: "Blue" },
          { strain: "sativa", value: "Hot pink" },
          { strain: "hybrid", value: "Green" },
        ]
      }, {
        question: "What ails you?",
        answerList: [
          { strain: "indica", value: "Body aches" },
          { strain: "sativa", value: "Anxiety and depression" },
          { strain: "hybrid", value: "Not much; I'm just a little bored." },
        ]
      }
    ];

    function renderQuestions() {
      var form = $('<form id="questionForm">')
      for (var i = 0; i < questions.length; i++) {
        var divHolder = $('<div>')
        var screenQuestionHolder = $('<p>').text(questions[i].question)
        divHolder.append(screenQuestionHolder)
        divHolder.append("<input type='radio' data-strain=" + questions[i].answerList[0].strain + " class='answerButton' value='" + questions[i].answerList[0] + "' name='" + i + "'>" + questions[i].answerList[0].value + "</input> </br>")
        divHolder.append("<input type='radio' data-strain=" + questions[i].answerList[1].strain + " class='answerButton' value='" + questions[i].answerList[1] + "' name='" + i + "'>" + questions[i].answerList[1].value + "</input> </br>")
        divHolder.append("<input type='radio' data-strain=" + questions[i].answerList[2].strain + " class='answerButton' value='" + questions[i].answerList[2] + "' name='" + i + "'>" + questions[i].answerList[2].value + "</input> </br>")
        form.append(divHolder)
      }

      $('#questions').append(form);
    }
    renderQuestions()
    $(document).on("click", ".submit", collectUserAnswers)

    function collectUserAnswers() {
      var tally = { indica: 0, sativa: 0, hybrid: 0 }
      var answerForm = $('#questionForm')
      var allAnswers = $(".answerButton")
      allAnswers.map(function (i, item) {
        if (allAnswers[i].checked) {
          var strain = allAnswers[i].attributes["data-strain"].value
          tally[strain]++
          console.log(tally)
        }

      })
      if (tally.sativa > tally.indica && tally.sativa > tally.hybrid) {
        console.log("sativa wins")
        $('#modalSativa').modal('show')
      }
      else if (tally.indica > tally.hybrid) {
        console.log("indica wins")
        console.log($('#modalIndica'))
        $('#modalIndica').modal('show')
      }
      else {
        console.log("hybrid wins")
        $('#modalHybrid').modal('show')
      }
    }
  </script>
</body>
</html>